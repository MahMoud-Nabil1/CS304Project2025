Index: src/GameObjects/Car.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package GameObjects;\r\n\r\npublic class Car extends GameObject {\r\n    protected int speed;\r\n    protected int damage;\r\n    protected int health;\r\n    protected  double damageFactor;\r\n    Car(int posX,int posY,int speed, int damage, int health) {\r\n        super(posX, posY);\r\n        this.speed = speed;\r\n        this.damage = damage;\r\n        this.health = health;\r\n        this.damageFactor = 1;\r\n    }\r\n}\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/GameObjects/Car.java b/src/GameObjects/Car.java
--- a/src/GameObjects/Car.java	(revision 2ef862d1b12a7c9fdd09f8aa57be404b01119796)
+++ b/src/GameObjects/Car.java	(date 1764929646075)
@@ -5,6 +5,8 @@
     protected int damage;
     protected int health;
     protected  double damageFactor;
+    protected  boolean alive;
+
     Car(int posX,int posY,int speed, int damage, int health) {
         super(posX, posY);
         this.speed = speed;
Index: src/GameObjects/Bullet.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package GameObjects;\r\n\r\npublic class Bullet extends GameObject {\r\n    int x;\r\n    int y;\r\n    int speed;\r\n    int damage;\r\n    public Bullet(int posX,int posY,int damage) {\r\n        super(posX,posY);\r\n        this.posX = posX;\r\n        this.posY = posY;\r\n        this.speed = 20;\r\n        this.damage = damage;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/GameObjects/Bullet.java b/src/GameObjects/Bullet.java
--- a/src/GameObjects/Bullet.java	(revision 2ef862d1b12a7c9fdd09f8aa57be404b01119796)
+++ b/src/GameObjects/Bullet.java	(date 1764860317572)
@@ -5,6 +5,7 @@
     int y;
     int speed;
     int damage;
+    boolean aliveBullet;
     public Bullet(int posX,int posY,int damage) {
         super(posX,posY);
         this.posX = posX;
Index: src/GameObjects/Obstacles.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package GameObjects;\r\n\r\npublic class Obstacles extends GameObject {\r\n    int damage;\r\n    Obstacles(int posX, int posY) {\r\n        super(posX, posY);\r\n        damage = 100;\r\n    }\r\n    Obstacles(int posX, int posY,int damage){\r\n        super(posX, posY);\r\n        this.damage = damage;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/GameObjects/Obstacles.java b/src/GameObjects/Obstacles.java
--- a/src/GameObjects/Obstacles.java	(revision 2ef862d1b12a7c9fdd09f8aa57be404b01119796)
+++ b/src/GameObjects/Obstacles.java	(date 1764931006334)
@@ -2,12 +2,27 @@
 
 public class Obstacles extends GameObject {
     int damage;
-    Obstacles(int posX, int posY) {
+    public Obstacles(int posX, int posY) {
         super(posX, posY);
-        damage = 100;
+        this.damage = 100;
+
+        // IMPORTANT: Set the size for collision detection!
+        // Adjust these numbers to match your obstacle image size
+        this.width = 40;
+        this.height = 40;
     }
+
     Obstacles(int posX, int posY,int damage){
         super(posX, posY);
         this.damage = damage;
+
+        // Set size here too
+        this.width = 40;
+        this.height = 40;
+    }
+
+    @Override
+    public void takeDamage(int amount) {
+        // Do nothing. I am a rock. I cannot die.
     }
 }
Index: src/GameObjects/PlayerCar.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package GameObjects;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class PlayerCar extends Car{\r\n    protected int nitro=100;\r\n    ArrayList<Bullet> bullets;\r\n    boolean doubleBulletActive;\r\n    int score=0;\r\n    PlayerCar(int posX, int posY) {\r\n        super(posX,posY,100,20,100);\r\n    }\r\n    PlayerCar(int posX, int posY, int speed, int damage, int health) {\r\n        super(posX,posY,speed, damage, health);\r\n    }\r\n    private boolean nitroActive = false;\r\n\r\n    public void nitroOn() {\r\n        if(nitro > 0 && !nitroActive) {\r\n            this.speed += 50;\r\n            this.damage += 50;\r\n            damageFactor = 1.5;\r\n            nitro--;\r\n            nitroActive = true;\r\n        }\r\n        if (nitro<=0&&!nitroActive) {\r\n            nitroOff();\r\n        }\r\n    }\r\n\r\n    public void nitroOff() {\r\n        if(nitroActive) {\r\n            this.speed -= 50;\r\n            this.damage -= 50;\r\n            nitroActive = false;\r\n        }\r\n    }\r\n    public void shoot() {\r\n        if(doubleBulletActive) {\r\n            bullets.add(new Bullet(posX - 5, posY, damage));\r\n            bullets.add(new Bullet(posX + 5, posY, damage));\r\n        } else {\r\n            bullets.add(new Bullet(posX, posY, damage));\r\n        }\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/GameObjects/PlayerCar.java b/src/GameObjects/PlayerCar.java
--- a/src/GameObjects/PlayerCar.java	(revision 2ef862d1b12a7c9fdd09f8aa57be404b01119796)
+++ b/src/GameObjects/PlayerCar.java	(date 1764932631903)
@@ -7,6 +7,7 @@
     ArrayList<Bullet> bullets;
     boolean doubleBulletActive;
     int score=0;
+    int health;
     PlayerCar(int posX, int posY) {
         super(posX,posY,100,20,100);
     }
@@ -44,5 +45,8 @@
         }
     }
 
-
+    @Override
+    public void takeDamage(int amount) {
+        super.takeDamage(amount);
+    }
 }
Index: src/GameObjects/GameObject.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package GameObjects;\r\n\r\npublic class GameObject {\r\n    int posX;\r\n    int posY;\r\n    GameObject(int posX, int posY){\r\n        this.posX = posX;\r\n        this.posY = posY;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/GameObjects/GameObject.java b/src/GameObjects/GameObject.java
--- a/src/GameObjects/GameObject.java	(revision 2ef862d1b12a7c9fdd09f8aa57be404b01119796)
+++ b/src/GameObjects/GameObject.java	(date 1764931184197)
@@ -1,10 +1,33 @@
 package GameObjects;
+import java.awt.Rectangle;
+
 
 public class GameObject {
     int posX;
     int posY;
+
+    public int width = 50;
+    public int height = 100;
+    public int health = 100; // Default health
+    public boolean alive=true;
     GameObject(int posX, int posY){
         this.posX = posX;
         this.posY = posY;
     }
+
+
+
+    // ----------------------------For Shehab Colleigions--------------------
+    // Helper to get the rectangle for collision math
+    public Rectangle getBounds() {
+        return new Rectangle(posX, posY, width, height);
+    }
+
+    // General method to take damage
+    public void takeDamage(int amount) {
+        this.health -= amount;
+        if (this.health <= 0) {
+            this.alive = false;
+        }
+    }
 }
Index: src/CarGLEventListener.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import GameObjects.LightCar;\r\nimport Texture.TextureReader;\r\nimport javax.media.opengl.GL;\r\nimport javax.media.opengl.GLAutoDrawable;\r\nimport javax.media.opengl.GLEventListener;\r\nimport javax.media.opengl.glu.GLU;\r\nimport javax.swing.*;\r\nimport java.awt.event.*;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.BitSet;\r\nimport java.util.List;\r\n\r\npublic class CarGLEventListener extends CarListener implements MouseListener , GLEventListener, KeyListener , ActionListener , MouseMotionListener {\r\n    double roadOffsetY = 0.0f;\r\n    String UserName;\r\n    boolean UserNameEntered = false;\r\n    int GameState   = 0;\r\n    final int Menu  = 0;\r\n    final int Game  = 1;\r\n    final int Pause = 2;\r\n    final int End   = 3;\r\n    final int Instructions = 4;\r\n    float btnX = 45;\r\n    float[] btnYPositions = {45, 30, 15};\r\n    float btnW = 20;\r\n    float btnH = 10;\r\n\r\n    int xM = 700;\r\n    int yM = 700;\r\n\r\n    String[] textureNames = {\"BackGroundTest.png\" , \"Man1.png\" , \"MenuBackGround.png\"\r\n            , \"StartButton.png\" , \"InstructionsButton.png\" , \"QuitButton.png\"\r\n    };\r\n    TextureReader.Texture[] texture = new TextureReader.Texture[textureNames.length];\r\n    int[] textures = new int[textureNames.length];\r\n\r\n    //---------------------- For Shehab Score 0 1 2 3 4 5 6 7 8 9 ----------------------------\r\n    String[] scoreTextureNames = {\"0.png\" , \"1.png\",\"2.png\",\"3.png\",\"4.png\",\"5.png\",\"6.png\",\"7.png\",\"8.png\",\"9.png\"};\r\n    TextureReader.Texture[] scoreTexture = new TextureReader.Texture[scoreTextureNames.length];\r\n    int[] scoreTextures = new int[scoreTextureNames.length];\r\n\r\n    // Score Variables\r\n    int frameCounter = 0;\r\n    int score = 0;\r\n    int xScore =10;\r\n    int yScore=90;\r\n\r\n\r\n\r\n    public BitSet keyBits = new BitSet(256);\r\n    int maxWidth =  100;\r\n    int maxHeight = 100;\r\n    float x = maxWidth/2.0f ;\r\n    float y =maxHeight/2.0f ;\r\n    float playerSpeed = 0.5f;\r\n    int angle = 0;\r\n    buttons[] menu;\r\n    buttons[] pause;\r\n    buttons[] endgame;\r\n    buttons[] game;\r\n\r\n\r\n\r\n    @Override\r\n    public void init(GLAutoDrawable gld) {\r\n        GL gl = gld.getGL();\r\n        gl.glClearColor(1.0f, 1.0f, 1.0f, 1.0f);\r\n        gl.glEnable(GL.GL_TEXTURE_2D);\r\n        gl.glBlendFunc(GL.GL_SRC_ALPHA, GL.GL_ONE_MINUS_SRC_ALPHA);\r\n        gl.glGenTextures(textureNames.length, textures, 0);\r\n        for(int i = 0; i < textureNames.length; i++){\r\n            try {\r\n                texture[i] = TextureReader.readTexture(assetsFolderName + \"//\" + textureNames[i] , true);\r\n                gl.glBindTexture(GL.GL_TEXTURE_2D, textures[i]);\r\n                new GLU().gluBuild2DMipmaps(\r\n                        GL.GL_TEXTURE_2D,\r\n                        GL.GL_RGBA,\r\n                        texture[i].getWidth(), texture[i].getHeight(),\r\n                        GL.GL_RGBA,\r\n                        GL.GL_UNSIGNED_BYTE,\r\n                        texture[i].getPixels()\r\n                );\r\n            } catch( IOException e ) {\r\n                System.out.println(e);\r\n            }\r\n        }\r\n\r\n\r\n        // -------------------For Shehab ScoreTexture------------------------------------\r\n        gl.glGenTextures(scoreTextureNames.length, scoreTextures, 0);\r\n\r\n        for(int i = 0; i < scoreTextureNames.length; i++){\r\n            try {\r\n                scoreTexture[i] = TextureReader.readTexture(assetsFolderName + \"//Score\" + \"//\" + scoreTextureNames[i] , true);\r\n                gl.glBindTexture(GL.GL_TEXTURE_2D, scoreTextures[i]);\r\n                new GLU().gluBuild2DMipmaps(\r\n                        GL.GL_TEXTURE_2D,\r\n                        GL.GL_RGBA,\r\n                        scoreTexture[i].getWidth(), scoreTexture[i].getHeight(),\r\n                        GL.GL_RGBA,\r\n                        GL.GL_UNSIGNED_BYTE,\r\n                        scoreTexture[i].getPixels()\r\n                );\r\n            } catch( IOException e ) {\r\n                System.out.println(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void display(GLAutoDrawable glAutoDrawable) {\r\n//        if(!UserNameEntered) {\r\n//            TakeUserName();\r\n//            UserNameEntered = true;\r\n//        }\r\n        GL gl = glAutoDrawable.getGL();\r\n        gl.glClear(GL.GL_COLOR_BUFFER_BIT);\r\n        gl.glLoadIdentity();\r\n\r\n        if(GameState == Menu) {\r\n            DrawBackground(gl);\r\n            for(int i = 0; i < btnYPositions.length; i++) {\r\n                MakeButton(gl, i);\r\n            }\r\n            gl.glEnable(GL.GL_TEXTURE_2D);\r\n            gl.glDisable(GL.GL_BLEND);\r\n\r\n        }else if(GameState == Game) {\r\n            background_loop(gl);\r\n            updateMovement();\r\n            DrawSprite(gl,x,y,1,1f);\r\n            // Score\r\n            score(gl , xScore , yScore);\r\n        }else if(GameState == Pause) {\r\n\r\n        }else if(GameState == End) {\r\n\r\n\r\n        } else if (GameState == Instructions) {\r\n\r\n        }\r\n    }\r\n    @Override\r\n    public void keyTyped(KeyEvent e) {\r\n\r\n    }\r\n    @Override\r\n    public void keyPressed(KeyEvent e) {\r\n        int keyCode = e.getKeyCode();\r\n        keyBits.set(keyCode);\r\n\r\n    }\r\n    @Override\r\n    public void keyReleased(KeyEvent e) {\r\n        int keyCode = e.getKeyCode();\r\n        keyBits.clear(keyCode);\r\n        angle = 0;\r\n    }\r\n    public boolean isKeyPressed(final int keyCode) {\r\n        return keyBits.get(keyCode);\r\n    }\r\n\r\n    @Override\r\n    public void reshape(GLAutoDrawable glAutoDrawable, int i, int i1, int i2, int i3) {\r\n    }\r\n\r\n    @Override\r\n    public void displayChanged(GLAutoDrawable glAutoDrawable, boolean b, boolean b1) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void actionPerformed(ActionEvent e) {\r\n\r\n    }\r\n    public void DrawBackground(GL gl){\r\n        gl.glEnable(GL.GL_BLEND);\r\n        gl.glBindTexture(GL.GL_TEXTURE_2D, textures[2]);\r\n\r\n        gl.glPushMatrix();\r\n        gl.glBegin(GL.GL_QUADS);\r\n        gl.glTexCoord2f(0.0f, 0.0f);\r\n        gl.glVertex3f(-1.0f, -1.0f, -1.0f);\r\n        gl.glTexCoord2f(1.0f, 0.0f);\r\n        gl.glVertex3f(1.0f, -1.0f, -1.0f);\r\n        gl.glTexCoord2f(1.0f, 1.0f);\r\n        gl.glVertex3f(1.0f, 1.0f, -1.0f);\r\n        gl.glTexCoord2f(0.0f, 1.0f);\r\n        gl.glVertex3f(-1.0f, 1.0f, -1.0f);\r\n        gl.glEnd();\r\n        gl.glPopMatrix();\r\n\r\n        gl.glDisable(GL.GL_BLEND);\r\n    }\r\n    public void background_loop(GL gl){\r\n\r\n        roadOffsetY -= 0.02f;\r\n\r\n        if(roadOffsetY <= -2.0f){\r\n            roadOffsetY = 0.0f;\r\n        }\r\n        gl.glEnable(GL.GL_BLEND);\r\n        gl.glBindTexture(GL.GL_TEXTURE_2D, textures[0]);\r\n\r\n        gl.glPushMatrix();\r\n        gl.glTranslated(0.0f, roadOffsetY, 0.0f);\r\n        gl.glBegin(GL.GL_QUADS);\r\n        gl.glTexCoord2f(0.0f, 0.0f); gl.glVertex3f(-1.0f, -1.0f, -1.0f);\r\n        gl.glTexCoord2f(1.0f, 0.0f); gl.glVertex3f( 1.0f, -1.0f, -1.0f);\r\n        gl.glTexCoord2f(1.0f, 1.0f); gl.glVertex3f( 1.0f,  1.0f, -1.0f);\r\n        gl.glTexCoord2f(0.0f, 1.0f); gl.glVertex3f(-1.0f,  1.0f, -1.0f);\r\n        gl.glEnd();\r\n        gl.glPopMatrix();\r\n\r\n        gl.glPushMatrix();\r\n        gl.glTranslated(0.0f, roadOffsetY + 2.0f, 0.0f);\r\n        gl.glBegin(GL.GL_QUADS);\r\n        gl.glTexCoord2f(0.0f, 0.0f); gl.glVertex3f(-1.0f, -1.0f, -1.0f);\r\n        gl.glTexCoord2f(1.0f, 0.0f); gl.glVertex3f( 1.0f, -1.0f, -1.0f);\r\n        gl.glTexCoord2f(1.0f, 1.0f); gl.glVertex3f( 1.0f,  1.0f, -1.0f);\r\n        gl.glTexCoord2f(0.0f, 1.0f); gl.glVertex3f(-1.0f,  1.0f, -1.0f);\r\n        gl.glEnd();\r\n        gl.glPopMatrix();\r\n\r\n        gl.glDisable(GL.GL_BLEND);\r\n    }\r\n\r\n    public void MakeButton(GL gl, int index){\r\n        float btnY = btnYPositions[index];\r\n        int TexturePosition = index + 3;\r\n        gl.glEnable(GL.GL_BLEND);\r\n        gl.glBindTexture(GL.GL_TEXTURE_2D, textures[TexturePosition]);\r\n        gl.glPushMatrix();\r\n        gl.glTranslated(btnX/(maxWidth/2.0) - 0.9, btnY/(maxHeight/2.0) - 0.9, 0);\r\n        gl.glScaled(0.1 * (btnW/10.0), 0.1 * (btnH/10.0), 1);\r\n        gl.glBegin(GL.GL_QUADS);\r\n        gl.glTexCoord2f(0.0f, 0.0f); gl.glVertex3f(-1.0f, -1.0f, -1.0f);\r\n        gl.glTexCoord2f(1.0f, 0.0f); gl.glVertex3f( 1.0f, -1.0f, -1.0f);\r\n        gl.glTexCoord2f(1.0f, 1.0f); gl.glVertex3f( 1.0f,  1.0f, -1.0f);\r\n        gl.glTexCoord2f(0.0f, 1.0f); gl.glVertex3f(-1.0f,  1.0f, -1.0f);\r\n        gl.glEnd();\r\n        gl.glPopMatrix();\r\n    }\r\n\r\n    public void TakeUserName(){\r\n        UserName = JOptionPane.showInputDialog(null, \"Please enter your name:\");\r\n\r\n        if (UserName != null && !UserName.trim().isEmpty()) {\r\n            System.out.println(\"User entered: \" + UserName);\r\n        } else {\r\n            System.out.println(\"User cancelled or entered nothing.\");\r\n        }\r\n    }\r\n    public void updateMovement() {\r\n        if (isKeyPressed(KeyEvent.VK_UP) && isKeyPressed(KeyEvent.VK_RIGHT) && y < maxHeight - 10  && x < maxWidth - 18){\r\n            y += playerSpeed;\r\n            x += playerSpeed;\r\n            angle = -45;\r\n        }\r\n        else if (isKeyPressed(KeyEvent.VK_UP) && isKeyPressed(KeyEvent.VK_LEFT ) && y < maxHeight - 18  && x > 7) {\r\n            y += playerSpeed;\r\n            x -= playerSpeed;\r\n            angle = 45;\r\n        }\r\n        else if (isKeyPressed(KeyEvent.VK_UP) && y < maxHeight - 10)\r\n            y += playerSpeed;\r\n\r\n        else if (isKeyPressed(KeyEvent.VK_DOWN) && y > 0)\r\n            y -= playerSpeed;\r\n\r\n        else if (isKeyPressed(KeyEvent.VK_LEFT) && x > 7)\r\n            x -= playerSpeed;\r\n\r\n        else if (isKeyPressed(KeyEvent.VK_RIGHT) && x < maxWidth - 18)\r\n            x += playerSpeed;\r\n    }\r\n\r\n    public void DrawSprite(GL gl,float x, float y, int index, float scale){\r\n        gl.glEnable(GL.GL_BLEND);\r\n        gl.glBindTexture(GL.GL_TEXTURE_2D, textures[index]);\r\n\r\n        gl.glPushMatrix();\r\n        gl.glTranslated( x/(maxWidth/2.0) - 0.9, y/(maxHeight/2.0) - 0.9, 0);\r\n        gl.glScaled(0.1*scale, 0.1*scale, 1);\r\n        gl.glRotated(angle, 0, 0, 1);\r\n        gl.glBegin(GL.GL_QUADS);\r\n        gl.glTexCoord2f(0.0f, 0.0f);\r\n        gl.glVertex3f(-1.0f, -1.0f, -1.0f);\r\n        gl.glTexCoord2f(1.0f, 0.0f);\r\n        gl.glVertex3f(1.0f, -1.0f, -1.0f);\r\n        gl.glTexCoord2f(1.0f, 1.0f);\r\n        gl.glVertex3f(1.0f, 1.0f, -1.0f);\r\n        gl.glTexCoord2f(0.0f, 1.0f);\r\n        gl.glVertex3f(-1.0f, 1.0f, -1.0f);\r\n        gl.glEnd();\r\n        gl.glPopMatrix();\r\n\r\n        gl.glDisable(GL.GL_BLEND);\r\n    }\r\n\r\n    @Override\r\n    public void mouseDragged(MouseEvent e) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void mouseMoved(MouseEvent e) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void mouseClicked(MouseEvent e) {\r\n        double convertedX = ((double)e.getX() / xM) * maxWidth;\r\n        double convertedY = ((double)(yM - e.getY()) / yM) * maxHeight;\r\n        for (int i = 0; i < btnYPositions.length; i++) {\r\n            float btnY = btnYPositions[i];\r\n\r\n            float btnXStart = btnX - btnW/2.0f;\r\n            float btnXEnd = btnX + btnW/2.0f;\r\n            float btnYStart = btnY - btnH/2.0f;\r\n            float btnYEnd = btnY + btnH/2.0f;\r\n\r\n            if (convertedX >= btnXStart && convertedX <= btnXEnd &&\r\n                    convertedY >= btnYStart && convertedY <= btnYEnd) {\r\n                switch(i) {\r\n                    case 0: GameState = Game; break;\r\n                    case 1: GameState = Instructions; break;\r\n                    case 2: System.exit(0); break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void mousePressed(MouseEvent e) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void mouseReleased(MouseEvent e) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void mouseEntered(MouseEvent e) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void mouseExited(MouseEvent e) {\r\n\r\n    }\r\n\r\n\r\n    // ----------------------------------Score-----------------------\r\n\r\n    public void score(GL gl, int x, int y) {\r\n        // 1. Update logic (Keep your frame counter logic)\r\n        frameCounter++;\r\n        if (frameCounter > 10) {\r\n            score++;\r\n            System.out.println(score);\r\n            frameCounter = 0;\r\n        }\r\n\r\n        // 2. Convert Score to String to get individual digits\r\n        // Example: 15 -> \"15\"\r\n        String scoreString = Integer.toString(score);\r\n\r\n        // 3. Drawing Logic\r\n        gl.glEnable(GL.GL_BLEND);\r\n        gl.glColor3f(1.0f, 1.0f, 1.0f);\r\n\r\n        // Iterate through every digit in the string\r\n        for (int i = 0; i < scoreString.length(); i++) {\r\n\r\n            // Get the character (e.g., '1') and convert to int (1)\r\n            char c = scoreString.charAt(i);\r\n            int digit = Character.getNumericValue(c);\r\n\r\n            gl.glBindTexture(GL.GL_TEXTURE_2D, scoreTextures[digit]);\r\n\r\n            gl.glPushMatrix();\r\n\r\n            // MATH CONVERSION\r\n            // xOffset: multiply index 'i' by a spacing value (e.g., 10 pixels) so digits don't overlap\r\n            int digitWidth = 4; // Adjust this based on how wide your numbers are\r\n            int currentX = x + (i * digitWidth);\r\n\r\n            double glX = currentX / 50.0 - 1.0;\r\n            double glY = y / 50.0 - 1.0;\r\n\r\n            gl.glTranslated(glX, glY, 0);\r\n            gl.glScaled(0.13, 0.13, 1); // Reduced scale slightly so numbers fit better\r\n\r\n            gl.glBegin(GL.GL_QUADS);\r\n            gl.glTexCoord2f(0.0f, 0.0f); gl.glVertex3f(-1.0f, -1.0f, -1.0f);\r\n            gl.glTexCoord2f(1.0f, 0.0f); gl.glVertex3f(1.0f, -1.0f, -1.0f);\r\n            gl.glTexCoord2f(1.0f, 1.0f); gl.glVertex3f(1.0f, 1.0f, -1.0f);\r\n            gl.glTexCoord2f(0.0f, 1.0f); gl.glVertex3f(-1.0f, 1.0f, -1.0f);\r\n            gl.glEnd();\r\n\r\n            gl.glPopMatrix();\r\n        }\r\n\r\n        gl.glDisable(GL.GL_BLEND);\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/CarGLEventListener.java b/src/CarGLEventListener.java
--- a/src/CarGLEventListener.java	(revision 2ef862d1b12a7c9fdd09f8aa57be404b01119796)
+++ b/src/CarGLEventListener.java	(date 1764932119745)
@@ -1,4 +1,4 @@
-import GameObjects.LightCar;
+import GameObjects.*;
 import Texture.TextureReader;
 import javax.media.opengl.GL;
 import javax.media.opengl.GLAutoDrawable;
@@ -7,9 +7,14 @@
 import javax.swing.*;
 import java.awt.event.*;
 import java.io.IOException;
-import java.util.ArrayList;
-import java.util.BitSet;
-import java.util.List;
+import java.util.*;
+import java.io.File;
+import java.io.FileWriter;
+
+import ScoreRelated.*;
+
+import java.awt.Font;
+import com.sun.opengl.util.j2d.TextRenderer;
 
 public class CarGLEventListener extends CarListener implements MouseListener , GLEventListener, KeyListener , ActionListener , MouseMotionListener {
     double roadOffsetY = 0.0f;
@@ -36,7 +41,9 @@
     int[] textures = new int[textureNames.length];
 
     //---------------------- For Shehab Score 0 1 2 3 4 5 6 7 8 9 ----------------------------
-    String[] scoreTextureNames = {"0.png" , "1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png","9.png"};
+    String[] scoreTextureNames = {"0.png" , "1.png","2.png","3.png","4.png","5.png",
+            "6.png","7.png","8.png","9.png"};
+
     TextureReader.Texture[] scoreTexture = new TextureReader.Texture[scoreTextureNames.length];
     int[] scoreTextures = new int[scoreTextureNames.length];
 
@@ -45,7 +52,44 @@
     int score = 0;
     int xScore =10;
     int yScore=90;
+    // Inside Class Variables
+    int healthAnimCounter = 0; // Counts frames for the health bar
+    TextRenderer renderer;
+
+    //---------------------- For Shehab HealthBar ----------------------------------------
+
+    String[] healthTextureNames = {
+            "FullState1.png" ,"HealthReceviedFull.png" //100
+            ,"3_4State1.png","3_4State2.png"            //75
+            ,"HalfState1.png","HalfState2.png"
+            ,"LowState1.png","LowState2.png"
+            };
+
+    TextureReader.Texture[] healthTexture = new TextureReader.Texture[healthTextureNames.length];
+    int[] healthTextures = new int[healthTextureNames.length];
+
+
+
+    int xHealthBar=50;
+    int yHealthBar=50;
+
+    //--------------------------For Shehab Collegians-----------------------------------------------------------
+    public static ArrayList<GameObject> allObjects = new ArrayList<>();
+
+
+
+
+
+
+
+
+
 
+
+
+
+
+    //-------------------------------------------------------------------------------------
 
 
     public BitSet keyBits = new BitSet(256);
@@ -106,14 +150,50 @@
                 System.out.println(e);
             }
         }
+
+        renderer = new TextRenderer(new Font("SansSerif", Font.BOLD, 36));
+        // ---------------------------Mahmoud UserName Taking---------------------------------
+
+        TakeUserName();
+
+
+        //---------------------------- For Shehab Health Bar ---------------------------------
+
+        gl.glGenTextures(healthTextureNames.length, healthTextures, 0);
+        for(int i = 0; i < healthTextureNames.length; i++){
+            try {
+                healthTexture[i] = TextureReader.readTexture(assetsFolderName + "//HealthBar" + "//" + healthTextureNames[i] , true);
+                gl.glBindTexture(GL.GL_TEXTURE_2D, healthTextures[i]);
+                new GLU().gluBuild2DMipmaps(
+                        GL.GL_TEXTURE_2D,
+                        GL.GL_RGBA,
+                        healthTexture[i].getWidth(), healthTexture[i].getHeight(),
+                        GL.GL_RGBA,
+                        GL.GL_UNSIGNED_BYTE,
+                        healthTexture[i].getPixels()
+                );
+            } catch( IOException e ) {
+                System.out.println(e);
+            }
+        }
+
+        //-----------------------------Belal All Objects Taking-------------------------------------------
+        allObjects.clear();
+
+
+
+
+
     }
 
     @Override
     public void display(GLAutoDrawable glAutoDrawable) {
-//        if(!UserNameEntered) {
-//            TakeUserName();
-//            UserNameEntered = true;
-//        }
+        /*
+        if(!UserNameEntered) {
+            TakeUserName();
+            UserNameEntered = true;
+        }
+         */
         GL gl = glAutoDrawable.getGL();
         gl.glClear(GL.GL_COLOR_BUFFER_BIT);
         gl.glLoadIdentity();
@@ -131,10 +211,14 @@
             updateMovement();
             DrawSprite(gl,x,y,1,1f);
             // Score
-            score(gl , xScore , yScore);
+
+            drawScoreText(glAutoDrawable); // Pass the drawable, not just GL
+            //score(gl , xScore , yScore);
+            healthBarPlayer(gl, 75,xHealthBar,yHealthBar );
         }else if(GameState == Pause) {
 
         }else if(GameState == End) {
+            saveAndSortScore(UserName,score);
 
 
         } else if (GameState == Instructions) {
@@ -243,15 +327,6 @@
         gl.glPopMatrix();
     }
 
-    public void TakeUserName(){
-        UserName = JOptionPane.showInputDialog(null, "Please enter your name:");
-
-        if (UserName != null && !UserName.trim().isEmpty()) {
-            System.out.println("User entered: " + UserName);
-        } else {
-            System.out.println("User cancelled or entered nothing.");
-        }
-    }
     public void updateMovement() {
         if (isKeyPressed(KeyEvent.VK_UP) && isKeyPressed(KeyEvent.VK_RIGHT) && y < maxHeight - 10  && x < maxWidth - 18){
             y += playerSpeed;
@@ -353,8 +428,7 @@
     }
 
 
-    // ----------------------------------Score-----------------------
-
+    // ----------------------------------Score----------------------------------
     public void score(GL gl, int x, int y) {
         // 1. Update logic (Keep your frame counter logic)
         frameCounter++;
@@ -406,5 +480,234 @@
 
         gl.glDisable(GL.GL_BLEND);
     }
+    public void saveAndSortScore(String userName, int userScore) {
+        ArrayList<ScoreEntry> allScores = new ArrayList<>();
+        File file = new File("highscores.txt");
+
+        // 1. READ EXISTING SCORES
+        if (file.exists()) {
+            try {
+                Scanner scanner = new Scanner(file);
+                while (scanner.hasNextLine()) {
+                    String line = scanner.nextLine();
+                    // We expect format: "Name:Score"
+                    String[] parts = line.split(":");
+                    if (parts.length == 2) {
+                        String name = parts[0];
+                        int score = Integer.parseInt(parts[1]);
+                        allScores.add(new ScoreEntry(name, score));
+                    }
+                }
+                scanner.close();
+            } catch (Exception e) {
+                System.out.println("Error reading scores: " + e.getMessage());
+            }
+        }
+
+        // 2. ADD CURRENT USER
+        allScores.add(new ScoreEntry(userName, userScore));
+
+        // 3. SORT (Highest first)
+        Collections.sort(allScores);
+
+        // 4. WRITE BACK TO FILE
+        try {
+            FileWriter writer = new FileWriter(file); // Overwrite file
+            for (ScoreEntry entry : allScores) {
+                writer.write(entry.toString() + "\n");
+            }
+            writer.close();
+            System.out.println("Score saved successfully!");
+        } catch (IOException e) {
+            System.out.println("Error writing scores: " + e.getMessage());
+        }
+    }
+
+    public void TakeUserName() {
+        // Keep asking as long as UserName is null (Cancel) or Empty
+        while (UserName == null || UserName.trim().isEmpty()) {
+
+            UserName = JOptionPane.showInputDialog(null, "Please enter your name (Required):");
+
+            // If they try to be sneaky and click Cancel or leave it empty...
+            if (UserName == null || UserName.trim().isEmpty()) {
+                JOptionPane.showMessageDialog(null, "You must enter a name to play!");
+            }
+        }
+
+        System.out.println("User entered: " + UserName);
+    }
+    //----------------------------------Health Bar ----------------------------------
+
+    public void healthBarPlayer(GL gl, double currentHealth, int x, int y) {
+        // 1. Update Animation Counter
+        healthAnimCounter++;
+        if (healthAnimCounter > 20) {
+            healthAnimCounter = 0; // Reset every 20 frames
+        }
+
+        // 2. Determine Base Index (The starting image for this health level)
+        int baseIndex = -1;
+
+        if (currentHealth >= 100) {
+            baseIndex = 0; // 100% starts at index 0
+        } else if (currentHealth >= 75) {
+            baseIndex = 2; // 75% starts at index 2
+        } else if (currentHealth >= 50) {
+            baseIndex = 4; // 50% starts at index 4
+        } else if (currentHealth > 0) {
+            baseIndex = 6; // 25% starts at index 6
+        } else {
+            return; // Dead
+        }
+
+        // 3. Determine Animation Frame (0 or 1)
+        // If counter is 0-10: use Offset 0 (Normal)
+        // If counter is 11-20: use Offset 1 (Glow)
+        int animationOffset = 0;
+        if (healthAnimCounter > 10) {
+            animationOffset = 1;
+        }
+
+        // Final Texture Index = Base + Offset
+        int finalTextureIndex = baseIndex + animationOffset;
+
+        // 4. Draw
+        gl.glEnable(GL.GL_BLEND);
+        gl.glColor3f(1.0f, 1.0f, 1.0f);
+
+        gl.glBindTexture(GL.GL_TEXTURE_2D, healthTextures[finalTextureIndex]);
+
+        gl.glPushMatrix();
+
+        double glX = x / 50.0 - 1.0;
+        double glY = y / 50.0 - 1.0;
+
+        gl.glTranslated(glX, glY, 0);
+        gl.glScaled(0.13, 0.13, 1);
+
+        gl.glBegin(GL.GL_QUADS);
+        gl.glTexCoord2f(0.0f, 0.0f); gl.glVertex3f(-1.0f, -1.0f, -1.0f);
+        gl.glTexCoord2f(1.0f, 0.0f); gl.glVertex3f( 1.0f, -1.0f, -1.0f);
+        gl.glTexCoord2f(1.0f, 1.0f); gl.glVertex3f( 1.0f,  1.0f, -1.0f);
+        gl.glTexCoord2f(0.0f, 1.0f); gl.glVertex3f(-1.0f,  1.0f, -1.0f);
+        gl.glEnd();
+
+        gl.glPopMatrix();
+
+        gl.glDisable(GL.GL_BLEND);
+    }
+
+
+    public void drawScoreText(GLAutoDrawable drawable) {
+        // 1. Update Score Logic (Keep your existing frame counter)
+        frameCounter++;
+        if (frameCounter > 10) {
+            score++;
+            System.out.println(score);
+            frameCounter = 0;
+        }
+
+        // 2. Prepare the text
+        String textToDraw = "Score: " + score;
+
+        // 3. Draw the text
+        // We need the width and height of the window to position text correctly
+        int width = drawable.getWidth();
+        int height = drawable.getHeight();
+
+        renderer.beginRendering(width, height);
+
+        // Set Color (R, G, B, Alpha) - This is Yellow
+        renderer.setColor(1.0f, 1.0f, 0.0f, 1.0f);
+
+        // Draw the string
+        // x = 10 pixels from left
+        // y = height - 50 pixels (Top left corner)
+        renderer.draw(textToDraw, 10, height - 50);
+
+        renderer.endRendering();
+    }
+
+
+
+    //------------------------------------Collisons---------------------------------
+
+    public void checkCollision(GameObject obj1, GameObject obj2) {
+        // 1. Check if they are actually touching using Rectangle intersection
+        if (obj1.getBounds().intersects(obj2.getBounds())) {
+
+            // ------------------ CASE 1: Player hits Something ------------------
+            if (obj1 instanceof PlayerCar) {
+                handlePlayerCollision((PlayerCar) obj1, obj2);
+            }
+            else if (obj2 instanceof PlayerCar) {
+                handlePlayerCollision((PlayerCar) obj2, obj1);
+            }
+
+            // ------------------ CASE 2: Bullet hits Enemy ------------------
+            // (You can add bullet logic here later)
+        }
+    }
+
+    // Helper method to keep code clean
+    private void handlePlayerCollision(PlayerCar player, GameObject other) {
+
+        // SCENARIO A: Player hits Obstacle (Invincible)
+        if (other instanceof Obstacles) {
+            // Player takes massive damage (or dies instantly)
+            player.takeDamage(50);
+            System.out.println("Hit Obstacle! Player hurt.");
+            // We DO NOT call other.takeDamage(), so Obstacle stays alive (Invincible)
+        }
+
+        // SCENARIO B: Player hits Light Car
+        else if (other instanceof LightCar) {
+            int crashDamage = 20;
+
+            player.takeDamage(crashDamage); // Player takes normal damage
+            other.takeDamage(100);          // Light car gets destroyed (or takes damage)
+            System.out.println("Crashed into Light Car!");
+        }
+
+        // SCENARIO C: Player hits Weight Car (Assuming you have a class named WeightCar)
+        // Note: You didn't provide WeightCar class, but here is the logic:
+    /* else if (other instanceof WeightCar) {
+        int crashDamage = 50; // Player takes MORE damage
+
+        player.takeDamage(crashDamage);
+        other.takeDamage(50); // Weight car takes damage too
+        System.out.println("Crashed into Heavy Car!");
+    }
+    */
+    }
+
+    public void updateGameLogic() {
+        // --- PART 1: CHECK COLLISIONS ---
+        // Loop through every pair of objects
+        for (int i = 0; i < allObjects.size(); i++) {
+            GameObject obj1 = allObjects.get(i);
+
+            for (int j = i + 1; j < allObjects.size(); j++) {
+                GameObject obj2 = allObjects.get(j);
+
+                // Only check if both exist (are alive)
+                if (obj1.alive && obj2.alive) {
+                    checkCollision(obj1, obj2);
+                }
+            }
+        }
+
+        // --- PART 2: REMOVE DEAD OBJECTS ---
+        // Iterate backwards to safely remove items from the list
+        for (int i = allObjects.size() - 1; i >= 0; i--) {
+            if (!allObjects.get(i).alive) {
+                allObjects.remove(i);
+                // Optional: System.out.println("Object removed!");
+            }
+        }
+    }
+
+
 
 }
